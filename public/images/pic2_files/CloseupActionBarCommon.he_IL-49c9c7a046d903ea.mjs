"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[21177],{154184:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var i=a(667294),s=a(616550),o=a(883119),n=a(510526),r=a(656412),l=a(452639),d=a(477058),p=a(602185),c=a(357013),h=a(297728),u=a(995497),g=a(730212),m=a(868808),_=a(383399),b=a(501912),x=a(801621),y=a(590045),v=a(115642),f=a(167210),w=a(241716),A=a(993641),k=a(948324),S=a(785893);let j=(0,k.Z)(()=>Promise.all([a.e(88755),a.e(55448),a.e(73777),a.e(47442)]).then(a.bind(a,243789)),void 0,e=>243789,"SaveAffordance"),P=(0,k.Z)(()=>Promise.resolve().then(a.bind(a,241925)),void 0,e=>241925,"SecondarySendButtonCommon"),C=(0,k.Z)(()=>Promise.all([a.e(97270),a.e(73583),a.e(24859)]).then(a.bind(a,373583)),void 0,e=>373583,"ReactionPickerContainer"),I=(0,k.Z)(()=>a.e(78602).then(a.bind(a,955550)),void 0,e=>955550,"CloseupCommentButton");function R({goBack:e,gridDescription:t,isDeletedStoryPin:a,isEligibleForPinReactions:k,isOnSecretBoard:R,onEditSubmit:E,pin:Z,viewParameter:B,viewType:O,onSaveButtonClick:T,showRepinOnInitialRender:D,isStoryPin:z,actionBarContainerRef:M,outerPaddingSize:G=y.g9,maxWidth:H,showLeadPin:L}){let W=(0,s.TH)(),U=(0,b.Z)(),{checkExperiment:q}=(0,h.F)(),{showEnabledSaveBehavior:Y}=(0,A.Yh)(!0),{imgSrc:F}=(0,l.r)(),{clientTrackingParams:K,showCloseupContentRight:N,closeupWithinMasonryEnabled:V,peekCloseupEnabled:$}=(0,v.x4)(),{viewType:X,viewParameter:J}=(0,d.SU)(),Q=(0,_.Z)(),ee=(0,x.q6)(Q,Z?.pinner?.id,U),[et,ea]=(0,i.useState)(!!(0,m.mB)(W.search).share),[ei,es]=(0,i.useState)(!1),eo=(0,i.useCallback)(e=>es(e),[]),en=(0,i.useCallback)(()=>ea(!1),[]),er=(0,i.useCallback)(()=>ea(e=>!e),[]),el=Z.board?.owner?.id||Z.pinner?.id,{aggregated_pin_data:ed,comments_disabled:ep,reaction_counts:ec}=Z,{isRTL:eh}=(0,g.B)(),eu=V?H:H||y.Gg,eg=(0,r.Z)({pinKey:{type:"deprecated",data:Z},orbacActingAs:U,viewer:Q}),em=!!Object.keys(ec||{}).length,e_=ed?.did_it_data?.images_count??0,eb=(ed?.comment_count??0)+e_,ex=!ep&&!!eb&&q("ce_dweb_comment_button_with_comment_count").anyEnabled,ey=W.state?.fromEggsBoard,ev=R||a?null:(0,S.jsx)(p.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,S.jsx)(P,{closeupWithinMasonryEnabled:V,controllerOptions:{flyoutDisplayOptions:V?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:et,loggingOptions:{component:194,element:72,viewParameter:B||J,viewType:O||X},onFlyoutDismiss:en,onToggleFlyout:er,sendObject:{type:"pin",description:t,id:Z.id,imageUrl:F,ownerId:el,url:`/pin/${Z.id}/`,clientTrackingParams:K}}})}),ef=(0,S.jsx)(o.xu,{alignItems:"center",color:V?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:eu,rounding:2,children:(0,S.jsxs)(o.kC,{alignItems:"stretch",gap:V?2:0,justifyContent:"start",children:[!ee&&!!k&&(0,S.jsx)(p.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,S.jsxs)(o.xu,{alignItems:"center",display:"flex",marginEnd:em?2:0,children:[(0,S.jsx)(C,{clientTrackingParams:K,handleReactionTrayHover:eo,idealDirection:V?"down":void 0,pinId:Z.id,reactionButtonSize:48,reactionByMe:Z.reaction_by_me,reactionIconSize:20,showTooltip:!0,viewParameter:B,viewType:O}),(0,S.jsx)(u.Z,{pinId:Z.id,reactionCounts:ec,showPrettyNumber:!0})]})}),V&&(0,S.jsxs)(o.kC,{alignItems:"center",direction:"row",children:[(0,S.jsx)(I,{openCommentThreadOnClick:ex,pinKey:{type:"deprecated",data:Z},viewParameter:B,viewType:O}),ex&&(0,S.jsx)(o.xv,{weight:"bold",children:(0,S.jsx)(c.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:eb})})]}),ev,(0,S.jsx)(o.xu,{children:(0,S.jsx)(o.xu,{"data-test-id":"closeup-more-options",children:(0,S.jsx)(n.Z,{carouselSlotCurrentIndex:Z&&Z.carousel_data&&Z.carousel_data.index,clientTrackingParams:K,closeupWithinMasonryEnabled:V,goBack:e,isReactionTrayOpen:ei,onEditSubmit:E,pinKey:{type:"deprecated",data:Z},showEditPin:!a&&eg,viewParameter:B,viewType:O})})})]})}),ew=V?void 0:G,eA=(0,S.jsx)(o.xu,{ref:M,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:G/2,paddingRight:eh?void 0:ew,paddingLeft:eh?ew:void 0,paddingBottom:V?G/2:void 0,borderRadius:z?"0px 32px 32px 32px":N?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:V?0:z?-5:0,width:V?"100%":void 0,children:(0,S.jsx)(o.xu,{"data-test-id":"closeupActionBar",children:(0,S.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[ef,(0,S.jsx)(o.kC,{alignItems:"center",gap:2,children:!a&&!ee&&(0,S.jsx)(o.xu,{marginStart:V?0:3,children:(0,S.jsx)(j,{boardCount:Q.isAuth?Q.boardCount:0,clientTrackingParams:K,fromEggsBoard:ey||!1,onClickCallback:T,pin:Z,showEnabledSaveBehavior:Y,showRepinOnInitialRender:D,variant:"closeup",viewParameter:B,viewType:O})})})]})})});if(L||V)return eA;let ek=z&&!$?w.cI+4:w.hu;return $&&(ek=0),(0,S.jsx)(o.Le,{top:ek,zIndex:f.mS,children:eA})}},995497:(e,t,a)=>{a.d(t,{Z:()=>_});var i=a(667294),s=a(883119),o=a(923952),n=a(488792),r=a(357013),l=a(144326),d=a(104778),p=a(755349),c=a(750077),h=a(785893);function u(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let g=(0,i.lazy)(()=>a.e(17631).then(a.bind(a,717631)));class m extends i.PureComponent{constructor(...e){super(...e),u(this,"state",{displayAggregationModal:!1}),u(this,"showAggregationModal",()=>{let{disableModal:e,logContextEvent:t}=this.props;e||(this.setState({displayAggregationModal:!0}),t({event_type:101,view_type:3,view_parameter:139,component:13458,element:11435,aux_data:{objectId:this.props.pinId}}))}),u(this,"hideAggregationModal",()=>{this.setState({displayAggregationModal:!1})})}render(){let{displayAggregationModal:e}=this.state,{isBold:t,isStoryPin:a,paddingY:i,pinId:n,reactionCounts:l,showPrettyNumber:u}=this.props,m=l?(0,p.At)(l):null,_=l?(0,p.Ud)(l):0,b=!!m&&m.length>0&&m.filter(e=>!!d.GY[e]).map((e,t)=>{let a=e&&d.GY[e]?d.GY[e]:"",{label:i,gridAsset:o}=(0,d.fW)(a,this.props.i18n);return(0,h.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,h.jsx)(s.xu,{height:19,width:19,children:o&&(0,h.jsx)(s.Ee,{alt:i??"",fit:"cover",naturalHeight:1,naturalWidth:1,src:o})})},t)});return(0,h.jsxs)(s.xu,{children:[(0,h.jsx)(s.iP,{accessibilityLabel:`${_} reactions`,dataTestId:"reactions-count-button",onTap:this.showAggregationModal,children:!!b&&(0,h.jsx)(s.xu,{"data-test-id":"aggregated-reactions-container",display:"inlineBlock",children:u?(0,h.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:(0,h.jsx)(s.xv,{weight:"bold",children:(0,h.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:_})})}):(0,h.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},"data-test-id":"aggregated-reactions-container",direction:"row",display:"flex",height:a?"auto":19,paddingY:i??(a?0:6),children:[(0,h.jsx)(s.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:b}),(0,h.jsx)(s.xu,{paddingX:1,children:(0,h.jsx)(s.xv,{color:t?"default":"subtle",size:o.n,weight:t?"bold":"normal",children:(0,h.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:_})})})]})})}),e&&_&&(0,h.jsx)(c.Z,{children:(0,h.jsx)(g,{aggregatedReactions:b,onDismiss:this.hideAggregationModal,pinId:n,totalReactionCount:_})})]})}}u(m,"defaultProps",{isBold:!0});let _=function(e){let t=(0,l.ZP)(),a=(0,n.Z)();return(0,h.jsx)(m,{...e,i18n:t,logContextEvent:a})}},104778:(e,t,a)=>{a.d(t,{GY:()=>f,Jg:()=>v,fW:()=>w});var i=a(141594),s=a(42966),o=a(721366),n=a(252739),r=a(725170),l=a(921028),d=a(590755),p=a(861374),c=a(805525),h=a(736929),u=a(616097),g=a(486722),m=a(692984),_=a(808532),b=a(37260),x=a(308220),y=a(446649);let v=["goodIdea","love","thanks","wow","haha"],f={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},w=(e,t,a="darkGray")=>{let v={default:{staticAsset:"white"===a?u:h},goodIdea:{staticAsset:o,animatedAsset:i,gridAsset:s,label:t.bt("רעיון טוב", "Good idea", "Reaction label to tell a creator that their pin is a good idea", undefined, true),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:n,gridAsset:r,label:t.bt("חחח", "Haha", "Reaction label to tell a creator that the pinner laughed because of their pin", undefined, true),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:c,animatedAsset:d,gridAsset:p,label:t.bt("אהבתי", "Love", "Reaction label to tell a creator that the pinner loved their pin", undefined, true),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:_,animatedAsset:g,gridAsset:m,label:t.bt("תודה", "Thanks", "Reaction label to tell a creator thank you", undefined, true),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:y,animatedAsset:b,gridAsset:x,label:t.bt("ואוו", "Wow", "Reaction label to tell a creator that the pinner was wowed by their pin", undefined, true),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&v[e]?v[e]:v.default}},993641:(e,t,a)=>{a.d(t,{ZP:()=>l,tY:()=>c,Xt:()=>d,$7:()=>h,Yh:()=>p});var i=a(545007),s=a(297728),o=a(961754),n=a(383399);let r={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function l(e){let t=(0,n.Z)(),a=t.isAuth&&t.id===e,{checkExperiment:i}=(0,s.F)(),r=(0,o.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:a&&t.has_quicksave_board||!!(t.isAuth&&(r??{}).data?.has_quicksave_board)||(a||t.isAuth)&&!t.has_quicksave_board&&!(r??{}).data?.has_quicksave_board&&i("profile_saves_for_all").anyEnabled}}function d(e){let t=(0,n.Z)(),a=t.isAuth&&t.id===e,i=(0,o.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:a&&t.has_quicksave_board||!!(t.isAuth&&(i??{}).data?.has_quicksave_board)}}function p(e){let t=(0,i.I0)(),a=(0,n.Z)(),s=a.isAuth&&!!a.boardCount&&a.boardCount<5&&e,r=(0,o.Z)(s&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:a.isAuth&&a.id}}:null);return a.isAuth&&void 0===a.save_behavior&&r&&r.data?.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:r.data.save_behavior}}),{showEnabledSaveBehavior:s}}function c(e){let t;let a=(0,n.Z)();return e&&(a.save_behavior===r.SAVE_TO_PROFILE?t={type:"classic"}:a.save_behavior===r.SHOW_BOARD_PICKER&&(t={type:"inline"})),{saveBehaviorType:t}}function h(){let e=(0,n.Z)();return e.isAuth&&(e?.secretBoardCount??0)>0}},141594:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-5de05cb7.svg"},42966:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-e3e37a7f.svg"},721366:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-855554b0.svg"},252739:e=>{e.exports="https://s.pinimg.com/webapp/hahaAnimated-df9cb2fa.svg"},725170:e=>{e.exports="https://s.pinimg.com/webapp/hahaGrid-7945c718.svg"},921028:e=>{e.exports="https://s.pinimg.com/webapp/hahaStatic-28ee6e1e.svg"},590755:e=>{e.exports="https://s.pinimg.com/webapp/loveAnimated-ccd5b808.svg"},861374:e=>{e.exports="https://s.pinimg.com/webapp/loveGrid-1ec7b8e4.svg"},805525:e=>{e.exports="https://s.pinimg.com/webapp/loveStatic-31fc2a99.svg"},736929:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-24ab75a6.svg"},616097:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"},486722:e=>{e.exports="https://s.pinimg.com/webapp/thanksAnimated-6831daf3.svg"},692984:e=>{e.exports="https://s.pinimg.com/webapp/thanksGrid-b3cf8b93.svg"},808532:e=>{e.exports="https://s.pinimg.com/webapp/thanksStatic-51f19932.svg"},37260:e=>{e.exports="https://s.pinimg.com/webapp/wowAnimated-b776449f.svg"},308220:e=>{e.exports="https://s.pinimg.com/webapp/wowGrid-9e62e75a.svg"},446649:e=>{e.exports="https://s.pinimg.com/webapp/wowStatic-d966adbd.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon.he_IL-49c9c7a046d903ea.mjs.map