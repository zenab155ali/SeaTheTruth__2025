"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[84609],{49276:(e,t,n)=>{n.d(t,{Z:()=>a});function a(e,t){throw Error(t??`Unexpected value in assertNever: ${JSON.stringify(e)}`)}},596290:(e,t,n)=>{n.d(t,{Z:()=>j,G:()=>G});var a=n(441143),r=n.n(a),i=n(244311),l=n(53882);let o={vDASHHEVCSLCONTROL:"V_DASH_HEVC_SL_CONTROL",vHLSHEVC2SEC:"V_HLS_HEVC_2_SEC",vHLSHEVCSLCONTROL:"V_HLS_HEVC_SL_CONTROL",vHLSSINGLEFILECMAFEXP:"V_HLS_SINGLE_FILE_CMAF_EXP",vHLSSINGLEFILECONTROL:"V_HLS_SINGLE_FILE_CONTROL",vHLSSINGLEFILETSEXP:"V_HLS_SINGLE_FILE_TS_EXP",vHLSSLCONTROL:"V_HLS_SL_CONTROL",vHLSV3:"V_HLSV3",vHLSV3EXP:"V_HLSV3_EXP",vHLSV3MOBILE:"V_HLSV3_MOBILE",vHLSV3WEB:"V_HLSV3_WEB",vHLSV4:"V_HLSV4",vLOWBITRATEEXPHLSHEVCCONTROL:"V_LOW_BITRATE_EXP_HLS_HEVC_CONTROL",vLOWBITRATEEXPHLSHEVCLOB:"V_LOW_BITRATE_EXP_HLS_HEVC_LOB",vLOWBITRATEEXPHLSHEVCLQS:"V_LOW_BITRATE_EXP_HLS_HEVC_LQS"},c=/(\d\d0P)(\d\d0K)/,s=/QVBR(8|10)/,u=/(EXP\d?|ADSHQ|AVC|DASH|MANI|HIGHQUAL|HEVC|HLS|H265|H264|720P?|MP4|ENABLED|CONTROL|PROD|T\d|Q?VBR\d*|AUTOABR|MEDIACONVERT|QUALITY|REARRANGED|REMHIGHRES|VISIONULAR|480$|640$|V2$|\dSEC$|\d\d0P\d\d0K$)/g,d=/^v/,p=e=>o[e]??e.replace(u,"_$1").replace(c,"$1_$2").replace(s,"QVBR_$1").replace("ADSHQ","ADS_HQ").replace("HIGHQUAL","HIGH_QUAL").replace("REMHIGHRES","REM_HIGH_RES").replace(d,"V"),f=/[A-Z]/g,g=e=>e.replace(f,e=>`_${e.toLowerCase()}`),y=/^_/,m=e=>e.replace(y,""),S=e=>m(g(e)),h=["actionOptions","feedbackText","selectedItem","savedInfo","undoCallbackProps"],k=["boardId","localPinId","showFeedback","showFeedbackOverlay","sectionId","subTitle","viewType","viewParameter"],L=(e,t)=>{if(k.includes(e))return e;switch(e){case"entityId":return"id";case"__id":return r()(t.node_id,"node_id is missing. Please only select the __id field on objects which have an id field."),"node_id";default:return S(e)}},_=e=>"StoryPinPage"===e||"StoryPinImageBlock"===e,I=(e,t,n)=>{if(_(n)){if("images"===e)return"image";if("imagesAdjusted"===e)return"image_adjusted"}if("PinTagChipImagesPerSpec"===n&&"image"===e)return"images";if("VideoDetail"===t)return p(e);if(h.includes(e))return e;switch(e){case"reactionCountsData":return"reaction_counts";case"videoData":return"video";case"formattedCloseupDescription":return"formatted_description";case"annotationsWithLinksArray":return"annotations_with_links";default:return S(e)}},C=(e,t)=>{switch(e){case"reactionType":return"string"==typeof t?Number(t):t;case"campaignId":case"pinPromotionId":return"number"==typeof t?String(t):t;default:return t}},E=(e,t,n)=>"Video"===t&&"duration"===e?n?.duration!=null?n.duration:Object.values(n?.video_list||{}).find(e=>e?.duration!=null)?.duration:"__typename"===e?t??function(e){if(!e)return null;if("string"==typeof e.type)return(0,l.dF)(e.type);if("number"==typeof e.block_type){let t=e.block_type.toString();return t in B?B[t]:null}return null}(n):C(e,n?.[L(e,n)]),b=({untypedInput:e,concreteType:t})=>{if(!e)return null;switch(r()("object"==typeof e,"legacy data must be an object"),t){case"AnnotationsWithLinks":return Object.entries(e).map(([e,t])=>({name:t.name,url:t.url}));case"MessageReactions":if(Array.isArray(e)&&e.length>0)return e.flatMap(e=>Object.keys(e).map(t=>({user_id:t,reaction_text:e[t]})));return null;case"ReactionCountModel":return Object.entries(e).map(([e,t])=>({reaction_type:e,reaction_count:t}));case"PinThroughProperties":case"ThroughProperties":case"TrackingParamsMap":return Object.entries(e).map(([e,t])=>({key:e,data:t}));case"DescriptionSpecDetail":if(Array.isArray(e)){let t=[];return e.forEach(e=>{if(e)for(let n of Object.entries(e))t.push({key:n[0],value:n[1]})}),t}return Object.entries(e).map(([e,t])=>({key:e,value:t}));default:if(Array.isArray(e))return e;return Object.entries(e).map(([e,t])=>({key:e,value:t}))}},P=({args:e,name:t})=>{let n=e.find(e=>e.name===t);return n&&"string"==typeof n.value?n.value:null},A=(e,t,n)=>{let{args:a,name:i,plural:l}=n;if("PinTagChipImagesPerSpec"===t&&"image"===i)return e?.images?.["750x"];let o=e?.[I(i,n.concreteType,t)];if(!o)return o;let c=P({args:a??[],name:"spec"});if(c){if(r()("object"==typeof o,"value must be an object"),_(t)){let{dominant_color:e,images:t}=o;if(!t)return t;r()("object"==typeof t,"images must be an object");let n=t["orig"===c?"originals":c];return n&&e?{...n,dominant_color:e}:n}return l&&Array.isArray(o)?o.map(e=>e[c]).filter(e=>null!=e):o[c]}return o},H={HeadingBlock:"StoryPinHeadingBlock",IngredientBlock:"StoryPinIngredientBlock",InstantContentURLNavigateAction:"InstantContentActionUrlNavigate",InstantContentHeaderBlock:"InstantContentHeader",InstantContentParagraphBlock:"InstantContentParagraph",InstantContentTextBlock:"InstantContentText",InstantContentHeadingBlock:"InstantContentHeading",InstantContentImageBlock:"InstantContentImage",InstantContentVideoBlock:"InstantContentVideo",InstantContentTableBlock:"InstantContentTable",InstantContentGroupBlock:"InstantContentGroup",InstantContentOrderedListBlock:"InstantContentOrderedList",InstantContentUnorderedListBlock:"InstantContentUnorderedList",InstantContentSectionBlock:"InstantContentSection",InstantContentSeparatorBlock:"InstantContentSeparator",InstantContentUserBlock:"InstantContentUser",InstantContentWebBlock:"InstantContentWeb",InstantContentPromotedWebBlock:"InstantContentPromotedWeb",LinkBlock:"StoryPinLinkBlock",ParagraphBlock:"StoryPinParagraphBlock",SupplyBlock:"StoryPinSupplyBlock",TextBlock:"StoryPinTextBlock",DescriptionString:"FormattedDescriptionParagraphComponent",DescriptionHeader:"FormattedDescriptionHeaderComponent",DescriptionPoints:"FormattedDescriptionPointsComponent",DescriptionStringBold:"FormattedDescriptionBoldComponent",DescriptionTable:"FormattedDescriptionTableComponent",DescriptionSpecs:"FormattedDescriptionSpecsComponent",RichPinProductMetadata:"RichProductMetadata",ConversationMessage:"Message"},T={tempmessage:"message"},O=["article","board","pin","story"],R=e=>"schema"in e&&"string"==typeof e.schema&&O.includes(e.schema),D=(e,t)=>(H[e]??e).toLowerCase()===(T[t]??t),B={0:"StoryPinParagraphBlock",1:"StoryPinHeadingBlock",2:"StoryPinImageBlock",3:"StoryPinVideoBlock",4:"StoryPinLinkBlock",5:"StoryPinIngredientBlock",6:"StoryPinSupplyBlock",7:"StoryPinListBlock",8:"StoryPinKeyValueBlock",9:"StoryPinTextBlock",11:"StoryPinMusicBlock",12:"StoryPinMentionStickerBlock",13:"StoryPinProductStickerBlock",14:"StoryPinStaticStickerBlock",15:"StoryPinAnimatedStickerBlock",16:"StoryPinCommentReplyBlock",17:"StoryPinVirtualTryOnMakeupStickerBlock",18:"StoryPinAdBlock",19:"StoryPinGenericInteractiveStickerBlock"},v=/_/g,F=e=>{if("schema"in e&&"string"==typeof e.schema)return e.schema.toLowerCase();if("string"==typeof e.type)return e.type.replace(v,"").toLowerCase();if("number"==typeof e.block_type){let t=e.block_type.toString();return t in B?B[t].toLowerCase():void 0}};var w=n(541480),V=n(378019);let U=(e,t)=>{let{condition:n,passingValue:a}=e;return t[n]===a};var x=n(357021),N=n(415787);let G=Symbol("inlineFragmentSpread"),M=({conditionContext:e,fragmentName:t,mutableOutput:n,parentType:a,selections:i,legacyData:l,paginationInfo:o,refetchInfo:c,getDataFromRedux:s})=>{i.forEach(i=>{switch(i.kind){case"ScalarField":{let{alias:e,name:t}=i;n[e??t]=E(t,a,l);break}case"LinkedField":{let{alias:u,name:d,concreteType:p,plural:f,selections:g}=i,y=u??d,m=A(l,a,i);if(null==m){n[y]=m;return}if(f){let a=b({untypedInput:m,concreteType:p}),i=n[y];r()(!i||Array.isArray(i),"plural data must be an array"),n[y]=a?.filter(Boolean).map((n,a)=>{let r=i?.[a]??{};return M({conditionContext:e,fragmentName:t,mutableOutput:r,parentType:p,selections:g,legacyData:n,refetchInfo:c,paginationInfo:o,getDataFromRedux:s}),r})}else{r()("object"==typeof m,`Value for ${d} must be an object${p?` with type ${p}`:""}, but a ${typeof m} is given`);let a=n[y]??{};n[y]=a,M({conditionContext:e,fragmentName:t,mutableOutput:a,parentType:p,selections:g,legacyData:m,refetchInfo:c,paginationInfo:o,getDataFromRedux:s})}break}case"InlineFragment":{let{abstractKey:a,type:u,selections:d}=i;if(r()(null!=u&&null===a,"We only support using inline fragment to refine to concrete types for now. Contact @jackhsu or @robertbalicki"),null==l)break;let p=l;R(p)&&(p=s(p.id,p.schema)??l);let f=F(p);null!=f&&D(u,f)&&M({conditionContext:e,fragmentName:t,mutableOutput:n,parentType:u,selections:d,legacyData:p,paginationInfo:o,refetchInfo:c,getDataFromRedux:s});break}case"Condition":{let{selections:r}=i;U(i,e)&&M({conditionContext:e,fragmentName:t,mutableOutput:n,parentType:a,selections:r,legacyData:l,paginationInfo:o,refetchInfo:c,getDataFromRedux:s});break}case"FragmentSpread":(0,V.I9)(n,{kind:"LegacyData",singularLegacyData:l,refetchInfo:c,paginationInfo:o});break;case"ClientExtension":M({conditionContext:e,fragmentName:t,mutableOutput:n,parentType:a,selections:i.selections,legacyData:l,paginationInfo:o,refetchInfo:c,getDataFromRedux:s});break;case"InlineDataFragmentSpread":{let t={},{selections:r,name:u}=i;M({conditionContext:e,fragmentName:u,mutableOutput:t,parentType:a,selections:r,legacyData:l,paginationInfo:o,refetchInfo:c,getDataFromRedux:s}),n[G]||(n[G]={}),n[G][u]=t;break}case"Defer":case"Stream":case"ActorChange":case"FlightField":case"ModuleImport":case"RelayResolver":case"RequiredField":case"ClientEdge":throw Error(`The selection type '${i.kind}' is not supported yet. Contact @jackhsu or @robertbalicki`);default:throw Error("Unexpected selection type")}})},$=new Set;function j({conditionContext:e,fragment:t,legacyData:n,paginationInfo:a,refetchInfo:l,stableReferencesExperimentStatus:o,getDataFromRedux:c}){let s;let u=(0,i.getFragment)(t);try{s=function({conditionContext:e,fragment:t,legacyData:n,paginationInfo:a,refetchInfo:i,getDataFromRedux:l}){if(null==t.abstractKey){let e=null!=n?F(n):null;null!=e&&r()(D(t.type,e),`fragment data type '${t.type}' does not match legacy data type '${e}'. See http://pinch.pinadmin.com/fragment-data-type-does-not-match-legacy-data-type.`)}let o={};return M({conditionContext:e,fragmentName:t.name,mutableOutput:o,parentType:t.type,selections:t.selections,legacyData:n,paginationInfo:a,refetchInfo:i,getDataFromRedux:l}),o}({conditionContext:e,fragment:u,legacyData:n,paginationInfo:a,refetchInfo:l,getDataFromRedux:c})}catch(t){throw $.has(u.name)||($.add(u.name),(0,N.nP)("autoLegacyAdapter.erroredReadResults",{sampleRate:1,tags:{fragmentName:u.name,rootId:n.id,rootType:n.type,url:window.location.href,isAuth:e.isAuth}})),t}let d=n.id;if(!o?.shouldCalculateStableReferences||!d)return s;let p=(0,x._0)(u,n.id),f=(0,w.Z)({cacheKey:p,data:s,fragment:u});return o?.shouldUseStableReferences?f:s}},286102:(e,t,n)=>{n.d(t,{Z:()=>function e(t,n,l=null){let o={};return!function t(n,l,o,c){let s=function(e,t=null){let[n,a]=e.reduce((e,t)=>("InlineFragment"===t.kind?e[0].push(t):e[1].push(t),e),[[],[]]);if(1===n.length){let[e,r]=i(a);if(0===r.length){let[a,r]=i(n[0].selections),l=[...e,...a];return 0===l.length?{kind:"Uncategorized"}:{kind:"InlineFragmentWithTypename",typenameAliases:l,selections:r,concreteType:n[0].type,remainingPathCount:t}}}else if(1===e.length&&e[0]?.kind==="Condition"){let n=e[0];if(!n||"Condition"!==n.kind)throw Error("Error on @skip/@include directive");return{kind:"OnlyConditionWrapper",selections:n.selections,remainingPathCount:t}}else if(1===e.length&&"LinkedField"===e[0].kind){let n=e[0],a=n.concreteType??null;if(n.plural&&1!==t)return{kind:"Uncategorized"};if(null==a)return{kind:"OnlyLinkedFieldAndTypename",selections:n.selections,name:n.name,concreteTypeAndAliases:null,remainingPathCount:null==t?null:t-1};let[r,l]=i(n.selections);if(1===t){let e=n.alias??n.name,{pageInfoSelection:t,edgeSelection:a}=function(e){if(0===e.length||e.length>2||e.some(e=>"LinkedField"!==e.kind))throw Error("Unexpected selections");let t=e.reduce((e,t)=>{if("pageInfo"===t.name){if(null!==e.pageInfoSelection)throw Error("Expected only one pageInfo selection");e.pageInfoSelection=t}else{if(null!==e.edgeSelection)throw Error("Expected only one edge selection");e.edgeSelection=t}return e},{pageInfoSelection:null,edgeSelection:null});if(t.edgeSelection&&!t.edgeSelection.selections.find(e=>"node"===e.name))throw Error("Expected to find a node field inside of edges");return{pageInfoSelection:t.pageInfoSelection,edgeSelection:t.edgeSelection}}(l);if(null===a)throw Error("No edges found in connection field");let i=a.alias??a.name,{concreteType:o}=n;if(null==o&&r.length>0)throw Error("No concrete type found in connection field, so we cannot have __typename");let c=null!=o?{concreteType:o,typenameAliases:r}:null;return{kind:"ConnectionFieldAndTypename",selections:a.selections.filter(e=>!("ScalarField"===e.kind&&"cursor"===e.name)),pageInfoSelection:t,nameOrAliasOfEdgesField:i,nameOrAliasOfConnectionField:e,concreteTypeAndAliases:c}}return{kind:"OnlyLinkedFieldAndTypename",selections:l,name:n.name,concreteTypeAndAliases:{concreteType:a,typenameAliases:r},remainingPathCount:null==t?null:t-1}}else if(e.length>0&&e.every(e=>"FragmentSpread"===e.kind))return{kind:"OnlyFragmentSpread"};return{kind:"Uncategorized"}}(n,c);switch(s.kind){case"OnlyConditionWrapper":{let{selections:e,remainingPathCount:n}=s;t(e,l,o,n);break}case"InlineFragmentWithTypename":{let{concreteType:e,typenameAliases:n,selections:a,remainingPathCount:r}=s;n.forEach(t=>l[t]=e),t(a,l,o,r);break}case"OnlyFragmentSpread":(0,r.I9)(l,o);break;case"OnlyLinkedFieldAndTypename":{let{name:e,selections:n,concreteTypeAndAliases:a,remainingPathCount:r}=s,i={};if(l[e]=i,a&&a.typenameAliases.length>0){let{concreteType:e,typenameAliases:t}=a;for(let n of t)i[n]=e}t(n,i,o,r);break}case"ConnectionFieldAndTypename":{let{nameOrAliasOfEdgesField:t,nameOrAliasOfConnectionField:n,pageInfoSelection:a,selections:r,concreteTypeAndAliases:i}=s;if("PaginationLegacyData"!==o.kind)throw Error("Error, expected a PaginationLegacyData kind for this query");let c={[t]:o.paginationLegacyData.map(t=>e(r,{kind:"LegacyData",refetchInfo:o.refetchInfo,paginationInfo:o.paginationInfo,singularLegacyData:t}))};if(a&&o.paginationInfo&&(c[a.alias??a.name]=null),null!=i){let{concreteType:e,typenameAliases:t}=i;for(let n of t)c[n]=e}l[n]=c;break}case"Uncategorized":throw Error("The query passed to useLazyLoadQueryOrLegacy contained unsupported/uncategorized elements. Please simplify the query.");default:(0,a.Z)(s,"Unexpected category")}}(t,o,n,l),o}});var a=n(49276),r=n(378019);function i(e){return e.reduce((e,t)=>("ScalarField"===t.kind&&"__typename"===t.name?e[0].push(t.alias??t.name):e[1].push(t),e),[[],[]])}},529521:(e,t,n)=>{n.d(t,{g:()=>r,o:()=>i});var a=n(378019);function r(e){if(Array.isArray(e)){let t=e[0];if(null==t)return{kind:"PluralLegacy",data:[],paginationInfo:null,refetchInfo:null};if(null!=t.__fragments)return{kind:"GraphQL",data:e};let n=(0,a.G5)(t);if(null!=n)return{kind:"PluralLegacy",data:e.map(e=>(e=>{let t=(0,a.Be)(e);if("LegacyData"===t.kind)return t.singularLegacyData;throw Error("Unexpected plural object")})(e)),paginationInfo:n.paginationInfo,refetchInfo:n.refetchInfo};throw Error("Expected either __fragments or [legacyDataSymbol]")}let t=(0,a.G5)(e);if(null!=t&&"LegacyData"===t.kind){let{singularLegacyData:e,refetchInfo:n,paginationInfo:a}=t;return{kind:"SingularLegacy",data:e,refetchInfo:n,paginationInfo:a}}if(e.__fragments)return{kind:"GraphQL",data:e};if("graphqlRef"===e.type)return{kind:"GraphQL",data:e.data};if("deprecated"===e.type){let{data:t}=e;return Array.isArray(t)?{kind:"PluralLegacy",data:t,refetchInfo:null,paginationInfo:null}:{kind:"SingularLegacy",data:t,refetchInfo:null,paginationInfo:null}}if(null!=t&&"PaginationLegacyData"===t.kind){let{paginationLegacyData:e,refetchInfo:n,paginationInfo:a}=t;return{kind:"PaginationLegacyData",paginationLegacyData:e,refetchInfo:n,paginationInfo:a}}throw Error("Invalid value")}function i(e){return r(e).kind}},541480:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(596290),r=n(378019);function i(e,t,n){if(null===n)return null===t?t:n;if(void 0===n)return void 0===t?t:n;if(Array.isArray(n))return Array.isArray(t)?function(e,t,n){if(n.length!==t.length)return n;let a=!0;for(let r=0;r<n.length;r+=1){let l=i(e,t[r],n[r]);l!==t[r]?a=!1:n[r]=l}return a?t:n}(e,t,n):n;switch(e.kind){case"ScalarField":return t===n?t:n;case"LinkedField":case"InlineDataFragmentSpread":if(null==t)return n;return l({fragmentSelections:e.selections,oldSourceObject:t,newSourceObject:n});default:throw Error("Unexpected case.")}}function l({fragmentSelections:e,oldSourceObject:t,newSourceObject:n}){let l=!0,o=[e];for(;o.length>0;){let e=o.pop();if(!e)break;for(let c=0;c<e.length;c+=1){let s=e[c];switch(s?.kind){case"LinkedField":case"ScalarField":{let{alias:e,name:a}=s,r=e??a,o=t[r],c=i(s,o,n[r]);c!==o?l=!1:n[r]=c;break}case"FragmentSpread":{let e=(0,r.G5)(n);e&&(0,r.I9)(t,e);break}case"InlineDataFragmentSpread":{let{name:e}=s,r=t?.[a.G]?.[e];i(s,r,n?.[a.G]?.[e])!==r&&(l=!1);break}case"ClientExtension":case"Condition":o.push(s.selections);break;case"InlineFragment":{let e=s.type;n.__typename===e&&(t.__typename===n.__typename?o.push(s.selections):l=!1);break}case"Defer":case"Stream":case"ActorChange":case"FlightField":case"ModuleImport":case"RelayResolver":case"RequiredField":case"ClientEdge":case void 0:throw Error(`The selection type '${s?.kind}' is not supported yet`);default:throw Error("Unexpected case")}}}return l?t:n}var o=n(357021);function c({fragment:e,cacheKey:t,data:n}){let a=(0,o.aL)(t),r=n;if(null!=a){let i=l({oldSourceObject:a.data,newSourceObject:n,fragmentSelections:e.selections});i!==a.data&&(0,o.ax)(t,{count:a.count,data:i}),r=i}else(0,o.ax)(t,{count:0,data:n});return(0,o.U5)(t),setTimeout(()=>(0,o.H8)(t),3e4),r}},378019:(e,t,n)=>{n.d(t,{Be:()=>i,G5:()=>r,I9:()=>l});let a=Symbol("legacyData");function r(e){return e[a]}function i(e){return e[a]}function l(e,t){return e[a]=t,e}},53882:(e,t,n)=>{n.d(t,{O7:()=>l,aR:()=>u,dF:()=>f,dX:()=>s,gE:()=>d,pm:()=>c,tx:()=>o});var a=n(422578),r=n(730212),i=n(410150);let l=()=>{let{isAuthenticated:e}=(0,r.B)();return{isAuth:!!e,isDesktop:(0,i.HG)()}},o={" $fragmentSpreads":void 0," $fragmentType":void 0};function c(e){let{isAuthParam:t,isDesktop:n,authDesktopQuery:a,authMobileQuery:r,unauthDesktopQuery:i,unauthMobileQuery:l}=e;return t?n?a:r:n?i:l}function s(e){let{isAuthParam:t,isDesktop:n,authDesktopFragment:a,authMobileFragment:r,unauthDesktopFragment:i,unauthMobileFragment:l}=e;return t?n?a:r:n?i:l}function u(e){let{query:t,paginationFragment:n,variables:r}=e,i=(0,a.useLazyLoadQuery)(t,r);return(0,a.usePaginationFragment)(n,i)}function d(){let e=(0,i.HG)(),{isAuthenticated:t}=(0,r.B)();return{isAuthParam:t,isDesktop:e}}let p=/(?:^|_)([a-z])/g;function f(e){return e.replace(p,(e,t)=>t.toUpperCase())}},357021:(e,t,n)=>{n.d(t,{H8:()=>s,Ly:()=>o,U5:()=>c,_0:()=>p,aL:()=>u,ax:()=>d,w3:()=>f});var a=n(297728),r=n(730212),i=n(415787);let l=new Map;function o(e){let t=(0,a.F)(),{isAuthenticated:n}=(0,r.B)();if(!e)return{shouldCalculateStableReferences:!1,shouldUseStableReferences:!1};switch(t.checkExperiment(n?"auth_web_gql_stable_refs":"unauth_web_gql_stable_refs").group){case"control":default:return{shouldCalculateStableReferences:!1,shouldUseStableReferences:!1};case"enabled":return{shouldCalculateStableReferences:!0,shouldUseStableReferences:!0};case"enabled_only_calculation":return{shouldCalculateStableReferences:!0,shouldUseStableReferences:!1}}}function c(e){let t=l.get(e);t&&l.set(e,{count:t.count+1,data:t.data})}function s(e){let t=l.get(e);if(!t){let t=e.split("/")[0];throw(0,i.nP)("autoLegacyAdapter.stableReferences.cacheItemMissing",{sampleRate:1,tags:{fragmentName:t}}),Error(`Item with key ${e} not found in cache`)}if(1===t.count){l.delete(e);return}l.set(e,{count:t.count-1,data:t.data})}function u(e){return l.get(e)}function d(e,t){l.set(e,t)}function p(e,t){return`${e.name}/${t}`}function f(e,t,n){return t?{key:p(e,t),data:n}:null}},384609:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(422578),r=n(244311),i=n(49276),l=n(667294),o=n(529521),c=n(596290),s=n(286102),u=n(541480),d=n(53882),p=n(357021),f=n(415787);let g=function(e,t,n,a,i){let o=(0,p.Ly)(n),g=(0,d.O7)(),y=(0,l.useMemo)(()=>{if(t?.kind==="SingularLegacy"&&a(t)){let{data:n,refetchInfo:a,paginationInfo:r}=t,l=(0,c.Z)({conditionContext:g,fragment:e,legacyData:n,paginationInfo:r,refetchInfo:a,stableReferencesExperimentStatus:o,getDataFromRedux:i});return{itemsToRetain:[{legacyData:n,graphQLShapedData:l}],autoLegacyAdapterData:[l]}}if(t?.kind==="PluralLegacy"){let{data:n,refetchInfo:a,paginationInfo:r}=t,l=[],s=[];return n.forEach(t=>{let n=(0,c.Z)({conditionContext:g,fragment:e,legacyData:t,paginationInfo:r,refetchInfo:a,stableReferencesExperimentStatus:o,getDataFromRedux:i});l?.push(n),s?.push({legacyData:t,graphQLShapedData:n})}),{itemsToRetain:s,autoLegacyAdapterData:l}}if(t?.kind==="PaginationLegacyData"){let n=e?.metadata?.connection?.[0]?.path?.length??null,a=(0,s.Z)(e.selections,t,n),i=a;if("Query"===e.type&&o.shouldCalculateStableReferences){let t=(0,p._0)(e,r.ROOT_ID);i=(0,u.Z)({cacheKey:t,data:a,fragment:e})}return{itemsToRetain:[{graphQLShapedData:i,legacyData:{id:"Query"===e.type?r.ROOT_ID:null}}],autoLegacyAdapterData:[a]}}return null},[t?.kind==="PaginationLegacyData"?t.paginationLegacyData:t?.data]);return!function({items:e,shouldCalculateStableReferences:t}){(0,l.useEffect)(()=>{if(e&&t)return e.forEach(e=>{let{key:t,data:n}=e;if(!(0,p.aL)(t)){let e=t.split("/")[0];(0,f.nP)("autoLegacyAdapter.stableReferences.useRetainWhileMounted.cacheItemMissing",{sampleRate:1,tags:{fragmentName:e}}),(0,p.ax)(t,{count:0,data:n})}(0,p.U5)(t)}),()=>{e.forEach(({key:e})=>(0,p.H8)(e))}},[e?.map(({key:e})=>e).join(","),t])}({items:y?.itemsToRetain?.map(t=>{let{legacyData:n,graphQLShapedData:a}=t,i=n&&"id"in n&&"string"==typeof n.id?n.id:null;return p.w3(e,"Query"===e.type?r.ROOT_ID:i,a)}).filter(e=>null!=e),shouldCalculateStableReferences:o.shouldCalculateStableReferences}),y?.autoLegacyAdapterData};var y=n(545007);let m=function(e,t){let n=function(e,t){let{getDataFromRedux:n}=function(){let e=(0,l.useContext)(y.ET),t=e?.store?.getState();return{getDataFromRedux:(e,n)=>"pin"===n?t?.pins?.[e]:"story"===n?t?.stories?.[e]:"board"===n?t?.boards?.[e]:"article"===n?t?.articles?.[e]:null}}(),a=t?(0,o.g)(t):null,i=a?.kind!=="GraphQL",c=(0,r.getFragment)(e);if(!i)return{dataKey:a,isUsingALA:i,actualFragment:c,autoLegacyAdapterData:null};let s=g(c,a,i,()=>!0,n);return null===t||null==a?null:{dataKey:a,isUsingALA:i,actualFragment:c,autoLegacyAdapterData:s}}(e,t);if(!function(e,t){let n=(0,l.useRef)(null);if(null!=e){if(null==n.current)n.current=e;else if(n.current!==e)throw Error(`${t()}: reference type mismatch: expected ${n.current}, but received ${e}.`)}}(n?.dataKey.kind,()=>(0,r.getFragment)(e).name),null==n)return null;let{dataKey:c,actualFragment:s,autoLegacyAdapterData:u}=n;switch(c.kind){case"SingularLegacy":return u?.[0];case"PluralLegacy":return u;case"GraphQL":return(0,a.useFragment)(e,c.data);case"PaginationLegacyData":if(Array.isArray(t))throw Error("Unexpected Plural fragment");if(null!=(s?.metadata?.connection?.[0]?.path?.length??null))throw Error("Unexpected fragment containing a @connection directive. You should read this fragment with usePaginationFragmentOrLegacy instead.");return u?.[0];default:return(0,i.Z)(c,"Unexpected case")}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84609-487b7ff56b6fe6c9.mjs.map