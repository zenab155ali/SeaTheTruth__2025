"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[78794],{151817:(e,t,n)=>{n.d(t,{Z:()=>a,v:()=>r});let r=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function a(){if(!r())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},61218:(e,t,n)=>{n.d(t,{o$:()=>r,ty:()=>a,vE:()=>i});let{Provider:r,MaybeConsumer:a,useMaybeHook:i}=(0,n(498490).Z)("inviteContext")},786525:(e,t,n)=>{n.d(t,{L_:()=>a,Nh:()=>i,qn:()=>r});let r=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(e){return console.error("Cannot access localStorage."),t}},a=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(e){console.error("Cannot access localStorage.")}},i=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(e){console.error("Cannot access localStorage.")}}},407046:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(667294),a=n(883119),i=n(410287),l=n(785893);let o=40,p=70,s={__style:{borderRadius:"4px",padding:"10px 14px"}},d={__style:{borderWidth:"1px",borderStyle:"solid",borderColor:"white"}},u={__style:{borderRadius:"4px",padding:"10px 14px 9px 8px",whiteSpace:"nowrap"}},c=e=>({__style:{borderRadius:"24px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"14px",paddingRight:"14px",...e}}),m=e=>"transparent"===e||"dark"===e?"inverse":"primary"===e?"light":"default",_=({color:e,icon:t})=>t?u:"transparent"===e?{__style:{...s.__style,...d.__style}}:s,w=({accessibilityLabel:e,color:t,customStyles:n,forwardedRef:s,icon:d,inline:u=!1,minHeight:w=o,minWidth:h=p,onTouch:f,pressState:y,shape:v,text:g})=>{let[x,k]=(0,r.useState)(!1),b=m(t),S=_({color:t,icon:d}),Z=(0,l.jsx)(a.xu,{onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),position:"relative",children:(0,l.jsx)(a.xu,{color:"primary"===t&&x?"errorBase":t,dangerouslySetInlineStyle:"pill"===v?c(n):S,display:u?"inlineBlock":"flex",justifyContent:"center",minHeight:w,minWidth:h,children:(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"center",children:[d&&(0,l.jsx)(a.xu,{paddingX:"check"===d?2:0,children:(0,l.jsx)(a.JO,{accessibilityLabel:e,color:b,icon:d,inline:!0,size:"check"===d?16:20})}),(0,l.jsx)(a.xv,{color:b,inline:!0,lineClamp:1,size:"300",weight:"bold",children:g})]})})});return f?(0,l.jsx)(i.Z,{onTouch:f,pressState:y||"none",rounding:"pill"===v?"pill":2,children:(0,l.jsx)(a.xu,{ref:s,children:Z})}):Z}},978794:(e,t,n)=>{n.d(t,{M:()=>T,d:()=>N});var r=n(667294),a=n(616550),i=n(883119),l=n(192820),o=n(151817),p=n(488792),s=n(89393),d=n(282999),u=n(915571),c=n(730212),m=n(786525),_=n(166408),w=n(978993),h=n(1006),f=n(383399),y=n(463057),v=n(999836),g=n(971677),x=n(407046),k=n(564573),b=n(937637),S=n(256277),Z=n(648089),P=n(590238);let A=({children:e,external:t,externalQueryParams:n,target:r,href:i,features:l})=>{let o=(0,a.k6)();if(!i)return null;let p=(0,k.Z)(i);return e({navigate:e=>{e.preventDefault(),(0,Z.Z)({url:p})||t?"undefined"!=typeof window&&window.Windows?(0,P.Z)(p):(0,S.Z)(p,{queryParams:n,features:l}):(0,b.Z)({event:e,href:i,history:o,target:"blank"===r?"blank":null})}})};var j=n(785893),C=n(722952),L=n(970067),R=n(424583);let U=(0,r.lazy)(()=>Promise.all([n.e(97270),n.e(77728)]).then(n.bind(n,356546))),I=e=>"string"==typeof e?e:`${e.pathname||""}${e.search?`?${e.search}`:""}`,D=(e,t=!1)=>function({isAppUpsellDisabled:n,...x}){let{children:k,clientTrackingParams:b,deeplinkUri:S,external:Z,onTouch:P,refresh:A,to:D,viewParameter:T,viewType:N}=x,B=(0,v.Z)(),[$,O]=(0,r.useState)(!1),[W,E]=(0,r.useState)(!1),[q,M]=(0,r.useState)(!1),{isAuth:F}=(0,f.Z)(),{userAgent:{platform:H},locale:z}=(0,c.B)(),X=(0,R.Tt)(),G=(0,p.Z)(),{trackAppUpsellDismiss:V}=(0,g.Z)(),J=(0,a.TH)();(0,r.useEffect)(()=>{(async function(){(0,o.v)()&&(M(!0),(await (0,o.Z)()).length>0&&E(!0))})()},[]),(0,r.useEffect)(()=>{F||"true"===(0,_.Nl)().getItem(l.Vg)||((0,h.My)(`unauth.app_upsell.has_app.${W.toString()}`),(0,_.Nl)().setItem(l.Vg,"true"))},[W,F]);let K=()=>{G({event_type:1701,view_type:N,view_parameter:T}),$&&O(!1)};return(0,j.jsxs)(i.xu,{"data-test-id":"deeplink-wrapper",children:[$&&(0,j.jsx)(r.Suspense,{children:(0,j.jsx)(U,{app_upsell_type:"deep-link-app-upsell-modal",clientTrackingParams:b,deepLinkUri:S,isOpen:!0,onDismiss:()=>V({appUpsellType:"deep-link-app-upsell-modal",viewType:N,viewParameter:T,component:14157,element:10308}),onOpenInApp:()=>{(0,m.Nh)("deeplinkBehavior","branchfallback"),K()},shouldTrackDismiss:!0,to:D,viewParameter:T,viewType:N})}),(0,j.jsx)(C.Z,{children:r=>(0,j.jsx)(e,{...x,onTouch:e=>{let a=B&&!n&&F&&!Z&&!A&&!(0,u.FP)(window)&&!("ios"===H&&(z||"").startsWith("ar"))&&(0,L.kp)((0,s.Z)(X?.created_at));if(a){let t=!0,n=!1;"string"==typeof S&&(S||"").startsWith("/pin/")&&((0,d.uM)(J)||(0,d.am)(J)||(0,d.C$)(J))?q&&W&&S&&"android"===H&&(t=!1):(t=!1,n=!0),t?(e.stopPropagation(),e.preventDefault(),O(!0)):n||(e.stopPropagation(),e.preventDefault(),G({component:14347,element:13582,event_type:3830,view_type:20,view_parameter:3844,aux_data:{upsell_reason:"deep-link-app-upsell-modal"}}),r(S??(0,y.Z)(J,"android"===H),"deep-link-app-upsell-modal"))}else"branchfallback"!==(0,m.qn)("deeplinkBehavior")||(0,w.qn)("fallbackAttempt")||(e.stopPropagation(),e.preventDefault(),(0,w.Nh)("fallbackAttempt",1),r(S,"deep-link-app-upsell-modal",`${window.location.origin}${I(D)}`),K());!(t&&a)&&P&&P(e)},children:k})})]})},T=D(({accessibilityLabel:e,children:t,external:n,externalQueryParams:r,features:a,inline:l=!1,newTab:o,nofollow:p,onTouch:s,onBlur:d,onFocus:u,pressState:c,rounding:m,to:_})=>(0,j.jsx)(A,{external:n,externalQueryParams:r,features:a,href:_,target:o?"blank":null,children:({navigate:n})=>(0,j.jsx)(i.rU,{accessibilityLabel:e,display:l?"inlineBlock":"block",href:(0,k.Z)(_),onBlur:d?({event:e})=>d(e):void 0,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),s?.(e),e.defaultPrevented||n(e)},onFocus:u?({event:e})=>u(e):void 0,rel:p?"nofollow":"none",rounding:m,tapStyle:(Array.isArray(c)?c:[c]).includes("compress")?"compress":"none",underline:"none",children:t})})),N=D(x.Z,!0)},722952:(e,t,n)=>{n.d(t,{Z:()=>Z});var r=n(573706),a=n(297728),i=n(730212),l=n(61218),o=n(970067),p=n(172045),s=n(151817),d=n(868808),u=n(415787);let c="http://play.google.com/store/apps/details?id=com.pinterest",m=["access_token","new_password","new_password_confirm","password","next"],_=(e,t)=>t?(0,d.ru)(e,{invite_code:t}):e,w=(e,t,n)=>{if("ios"===t&&"string"==typeof e&&e.startsWith("discover/article/")){let t=e.split("/")[2];e=`discover_article/${t}/?is_deeplink=1`}return("string"==typeof e&&"shopping/"===e&&(e="?is_deeplink=1"),"string"==typeof e)?_(e,n):"ios"===t||"ipad"===t?_(e.iOS,n):"android"===t?_(e.android,n):null},h=({deeplinkUri:e,invite_code:t,platform:n,fallbackUrl:r,unauthId:a,app_upsell_type:i})=>({deeplink_path:w(e,n,t),current_page_url:(0,d.Gw)("undefined"!=typeof window?window.location.href:"",m),install_id:a,utm_source:140,utm_medium:2152,app_upsell_type:i,...r?{af_r:r}:null}),f=({deeplinkUri:e,invite_code:t,platform:n,unauthId:r,app_upsell_type:a})=>{let i=JSON.stringify({deeplink_path:w(e,n,t),current_page_url:(0,d.Gw)("undefined"!=typeof window?window.location.href:"",m),install_id:r});return{referrer:(0,d.XP)({utm_source:"mweb",utm_medium:"upsell",utm_content:i,app_upsell_type:a})}},y=({unauthId:e,app_upsell_type:t})=>({referrer:encodeURI((0,d.XP)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e,app_upsell_type:t}))}),v=()=>{if("undefined"!=typeof window){let e=new URLSearchParams(window.location.search);return e.has("utm_source")&&e.get("utm_source").includes("google_search")}return!1},g=()=>encodeURIComponent("https://app.appsflyer.com/com.pinterest?pid=dtsingletap_int&"+(0,d.XP)({c:"single_tap_unauth",af_c_id:"97867",clickid:(0,p.Z)()})),x=({isAuthenticated:e,checkExperiment:t,deeplinkUri:n,fallbackUrl:r,invite_code:a,logContextEvent:i,platform:l,redirectToLite:o,unauthId:p,userAgent:m,app_upsell_type:_,locale:w,isBot:x})=>{if(i?.({component:14347,element:13582,event_type:701,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),n){let k=h({isAuthenticated:e,deeplinkUri:n,fallbackUrl:r,invite_code:a,platform:l,unauthId:p,userAgent:m,app_upsell_type:_});if((0,u.nP)("mweb.deeplink",{sampleRate:1,tags:{platform:l}}),a&&(0,u.nP)("mweb.deeplink.invite_code",{sampleRate:1}),(0,u.nP)("mweb.deeplink.unauthId",{sampleRate:1,tags:{withUnauthId:!!p}}),o){(0,u.nP)("mweb.deeplink.lite_link",{sampleRate:1}),i?.({component:14347,element:13582,event_type:14540,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}});let e=y({unauthId:p,app_upsell_type:_});window.location.href=(0,d.ru)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===l){let r=f({deeplinkUri:n,invite_code:a,platform:l,unauthId:p,app_upsell_type:_});!x&&!e&&w?.toLowerCase().includes("en-us")&&v()&&t&&"enabled"===t("single_tap_unauth").group?window.location.href="https://delivers.dtignite.com/v2/delivers/clickAd.jsp?siteId=16686&campaignId=49161&tsti=true&updateApp=false&enablePostInstallAutoLaunch=true&dvURL="+g():(0,s.v)()?(0,s.Z)().then(e=>{if(e.length>0){let e=window.location.href.endsWith("/login")?window.location.href.replace("/login","string"==typeof n?n:n.android):window.location.href,t=(0,d.ru)(e,k);i?.({component:14347,element:13582,event_type:703,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.open(t)||i?.({component:14347,element:13582,event_type:702,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}})}else i?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.location.href=(0,d.ru)(c,r)}).catch(()=>{(0,u.nP)("mweb_android.deeplink.playStore.error",{sampleRate:1})}):(i?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.location.href=(0,d.ru)(c,r))}else{if((0,u.nP)("mweb.deeplink.appsflyer_link",{sampleRate:1}),"ios"===l&&"undefined"!=typeof window&&window.location.href.includes("show_yip_modal")){window.location.href=(0,d.ru)("https://pinterest.com/pinterest-predicts",k);return}i?.({component:14347,element:13582,event_type:14539,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.location.href=(0,d.ru)("https://pinterest.onelink.me/TVSr/21e04bfd",k)}}};var k=n(785893);function b({children:e,invite_code:t}){let{locale:n,isAuthenticated:l,isBot:p,unauthId:s,userAgent:{platform:d,raw:u}}=(0,i.B)(),{logContextEvent:c}=(0,r.v)(),{checkExperiment:m}=(0,a.F)();return e(async(e,r,a)=>{c({component:14347,element:13582,event_type:700,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:r}}),x({isAuthenticated:l,checkExperiment:m,deeplinkUri:e,fallbackUrl:a,invite_code:t,logContextEvent:c,platform:d,redirectToLite:(0,o.Rp)({isBot:p,platform:d,userAgent:u}),unauthId:s,userAgent:u,app_upsell_type:r,locale:n,isBot:p})})}let S=e=>(0,k.jsx)(l.ty,{children:t=>(0,k.jsx)(b,{...e,invite_code:t})});S.displayName="DeepLinkNavigator";let Z=S},463057:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(282999);function a(e,t){return"/"===e.pathname?"/":(0,r.am)(e)&&t?`board/${e.pathname.substr(1)}`:e.pathname.substr(1)}},999836:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(545007);let a=()=>(0,r.v9)(({session:{canUseNativeApp:e}})=>e)},971677:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(573706);function a(){let{logContextEvent:e}=(0,r.v)();return{trackAppUpsellDismiss:({appUpsellType:t,viewType:n,viewParameter:r,component:a,element:i})=>{e({event_type:10220,view_type:n??202,view_parameter:r,component:a,element:i,aux_data:{app_upsell_type:t}})}}}},970067:(e,t,n)=>{n.d(t,{G3:()=>d,Rp:()=>s,kp:()=>o});var r=n(967232),a=n(786525),i=n(978993);let l=14*r.F4,o=(e,t)=>{let n=function(){let e=Date.now(),t=Number((0,a.qn)("appUpsell"));return{currentTime:e,firstUpsellTime:Number((0,a.qn)("firstUpsellTime")),lastUpsellTime:t,showedAppUpsellCurrentSession:!!(0,i.qn)("showedAppUpsellCurrentSession")}}();return e?function(e,t,n){let{currentTime:r,firstUpsellTime:i,lastUpsellTime:o,showedAppUpsellCurrentSession:p}=e;return(n=n||l,!i||r<i+t)?!p:r-o>n&&((0,a.L_)("firstUpsellTime"),!0)}(n,r.F4):function(e,t){let{currentTime:n,lastUpsellTime:r}=e;return t=t||l,!r||n-r>t}(n,t)},p=e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0},s=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat(p(n))}catch(e){return!1}},d=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/78794-f03e27f0e5eab90a.mjs.map